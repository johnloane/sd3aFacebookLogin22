<html>
	<head> 
		<title>Getting Sensors Online</title>
		<script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.33.1.js"></script>
		<script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.33.1.min.js"></script>
		<script src="static/js/main.js"></script>
	</head>
	<body onload="keepAlive(); time();">
		<h1> Online </h1>
		<h2>Connection: <span id="Connection_id">...</span></h2>
		<h2>Motion: <span id="Motion_id">...</span></h2>
		<div>
			<input type="checkbox" id="buzzer" onclick="handleClick(this);"/>
			<label for = "Buzzer_On">Buzzer On</label>
		</div>
		<div>
			<button onClick="logout()">Logout</button>
		</div>
		{% if user_id == "327150209222373" %}
		<div>
			<h2> Online users</h2>
			<ul>
				{% for n in online_users["user_record"] %}
				<li>
					{{ n[0]}}
					<input type="checkbox" id="read-user-{{n[1]}}" {{n[2]}}>Read Access
					<input type="checkbox" id="write-user-{{n[1]}}" {{n[3]}}>Write Access
					<button id = "access-user-{{n[1]}}" onClick = "grantAccess(this)">Apply</button>
				</li>
				{% endfor %}
			</ul>
		</div>
		{% endif %}
		{% for message in get_flashed_messages() %}
			{{message}}
		{% endfor %}
	</body>
</html>
